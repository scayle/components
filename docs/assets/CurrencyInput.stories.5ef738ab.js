import{e as y,d as _,j as B,k as U,o as S,l as E,X as w,Y as N,p as $}from"./vue.esm-bundler.b273ba75.js";import{u as T}from"./useConfig.46e52741.js";import{_ as v}from"./Input.310ceaf0.js";import{_ as R}from"./_plugin-vue_export-helper.cdc0426e.js";function i(e,n){return Number(Math.round(Number(e+"e"+n))+"e-"+n)}const s=y({name:"CurrencyBehavior",props:{modelValue:{type:Number,default:0},currency:{type:String,default:""},round:{type:Boolean,default:!1},minorUnit:{type:Boolean,default:!1}},emits:{["update:modelValue"](e){return!0},focus(e){return!0},blur(e){return!0}},setup(){const e=T();return{locale:_("locale",e.locale)}},data(){return{isActive:!1}},computed:{normalValue(){return this.minorUnit&&this.modelValue!==null?this.modelValue/10**this.decimalPlaces:this.modelValue},inputValue(){if(this.normalValue===null)return null;if(this.isActive)return this.normalValue+"";try{return new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:"symbol"}).format(this.normalValue)}catch{return this.normalValue+""}},decimalPlaces(){if(!this.currency)return 2;const n=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency}).formatToParts(0).find(t=>t.type==="fraction");return n?n.value.length:0},nativeBindings(){return{onBlur:e=>this.blur(e),onFocus:e=>this.focus(e),value:this.inputValue,onInput:e=>{e.target instanceof HTMLInputElement&&this.inputChange(e.target.value)},type:this.isActive?"number":"text"}},componentBindings(){return{onBlur:e=>this.blur(e),onFocus:e=>this.focus(e),modelValue:this.inputValue,"onUpdate:modelValue":e=>{this.inputChange(e)},type:this.isActive?"number":"text"}}},methods:{focus(e){this.isActive=!0,this.$nextTick(()=>{var t,u,o;const n=(t=this.$el)==null?void 0:t.nextElementSibling;n instanceof HTMLInputElement?n.select():(o=(u=this.$el)==null?void 0:u.nextElementSibling.querySelector("input"))==null||o.select()}),this.$emit("focus",e)},blur(e){this.isActive=!1,this.$emit("blur",e)},inputChange(e){if(e===this.inputValue)return;const n=parseFloat(e);let t;this.minorUnit?t=i(this.minorUnit?n*10**this.decimalPlaces:n,0):this.round?t=this.round?i(n,this.decimalPlaces):n:t=n,isNaN(t)||this.$emit("update:modelValue",t)}},render(){var e,n;return(n=(e=this.$slots).default)==null?void 0:n.call(e,{nativeBindings:this.nativeBindings,componentBindings:this.componentBindings})}});s.__docgenInfo={displayName:"CurrencyBehavior",exportName:"default",description:"",tags:{},props:[{name:"modelValue",type:{name:"number | null"},defaultValue:{func:!1,value:"0"}},{name:"currency",type:{name:"string | null"},defaultValue:{func:!1,value:"''"}},{name:"round",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"minorUnit",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue",type:{names:["undefined"]}},{name:"focus",type:{names:["undefined"]}},{name:"blur",type:{names:["undefined"]}}],slots:[{name:"default",bindings:[]}],sourceFiles:["/home/runner/work/components/components/src/components/CurrencyInput/CurrencyBehavior.vue"]};const g=y({name:"CurrencyInput",components:{Input:v,CurrencyBehavior:s},props:{modelValue:{type:Number,default:0},currency:{type:String,default:""},round:{type:Boolean,default:!1},minorUnit:{type:Boolean,default:!1}},emits:{["update:modelValue"](e){return!0}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}});function k(e,n,t,u,o,F){const I=v,C=s;return S(),B(C,{modelValue:e.value,"onUpdate:modelValue":n[0]||(n[0]=l=>e.value=l),currency:e.currency,"minor-unit":e.minorUnit,round:e.round},{default:U(({componentBindings:l})=>[E(I,w(N(l)),null,16)]),_:1},8,["modelValue","currency","minor-unit","round"])}const V=R(g,[["render",k]]);g.__docgenInfo={displayName:"CurrencyInput",exportName:"default",description:"",tags:{},props:[{name:"modelValue",type:{name:"number | null"},defaultValue:{func:!1,value:"0"}},{name:"currency",type:{name:"string | null"},defaultValue:{func:!1,value:"''"}},{name:"round",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"minorUnit",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue",type:{names:["undefined"]}}],sourceFiles:["/home/runner/work/components/components/src/components/CurrencyInput/CurrencyInput.vue"]};const x=`
There's also a headless variant which takes the same props and lets you pass in your own input as the default slot.

    <currency-behavior v-model="currencyValue" currency="EUR" v-slot="{nativeBindings}">
        <input v-bind="nativeBindings" />
    </currency-behavior>

    <currency-behavior v-model="currencyValue" currency="USD" v-slot="{componentBindings}">
        <ay-input v-bind="componentBindings"></ay-input>
    </currency-behavior>
`,K={title:"Components/CurrencyInput",component:V,argTypes:{locale:{name:"Locale",type:{name:"string",required:!1},defaultValue:"de-DE"},modelValue:{description:"The value of the field. Supports v-model binding"},currency:{description:"The 3-letter currency code"},round:{description:"If true, the value will be rounded after input. (e.g. 1.009 EUR will become 1.01 EUR and 100.9 ISK will become 101 ISK)"},minorUnit:{description:"If true, then it\u2019s assumed that the minor unit of the selected currency is being used. (e.g. the value represents EUR cents, not EUR). This only affects the value, the major unit is always displayed. So if value=10000 and this prop is set, then \u2018100.00 EUR\u2019 will be displayed in the field. If the user changes the value to 120, then 12000 will be emitted in the update. If the currency has no minor unit such as ISK, then this prop has no effect."}},parameters:{docs:{description:{component:x}}}},b=e=>({components:{CurrencyInput:V},setup(){return $("locale",e.locale),{args:e}},template:'<CurrencyInput v-bind="args" />'}),r=b.bind({});r.args={modelValue:100,currency:"EUR"};const a=b.bind({});a.args={locale:"en-US",modelValue:100,currency:"USD"};var c,p,m;r.parameters={...r.parameters,docs:{...(c=r.parameters)==null?void 0:c.docs,source:{originalSource:`(args: any) => ({
  components: {
    CurrencyInput
  },
  setup() {
    provide('locale', args.locale);
    return {
      args
    };
  },
  template: '<CurrencyInput v-bind="args" />'
})`,...(m=(p=r.parameters)==null?void 0:p.docs)==null?void 0:m.source}}};var d,f,h;a.parameters={...a.parameters,docs:{...(d=a.parameters)==null?void 0:d.docs,source:{originalSource:`(args: any) => ({
  components: {
    CurrencyInput
  },
  setup() {
    provide('locale', args.locale);
    return {
      args
    };
  },
  template: '<CurrencyInput v-bind="args" />'
})`,...(h=(f=a.parameters)==null?void 0:f.docs)==null?void 0:h.source}}};const L=["Euro","USDollar"];export{r as Euro,a as USDollar,L as __namedExportsOrder,K as default};
